import "primitives/std.lib";

component fn0 () -> (out: 32) {
  cells {
    const0 = prim std_const(32, 42);
    ret = prim std_reg(32);
  }
  wires {
    group save_return_value {
      ret.in = const0.out;
      ret.write_en = 1'd1;
      save_return_value[done] = ret.done;
    }
    out = ret.out;
  }
  control {
    seq {
      save_return_value;
    }
  }
}

component main () -> () {
  cells {
    f0 = fn0;
    ret = prim std_reg(32);
  }
  wires {
    f0.go = 1'd1;
    ret.write_en = 1'd1;
    ret.in = f0.done ? f0.out;
  }
  control {

  }
}
