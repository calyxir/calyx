import "primitives/std.lib";

component fn0 (x: 32) -> (out: 32) {
  cells {
    ret = prim std_reg(32);
  }
  wires {
    group save_return_value {
      ret.in = x;
      ret.write_en = 1'd1;
      save_return_value[done] = ret.done;
    }
    out = ret.out;
  }
  control {
    seq {
      save_return_value;
    }
  }
}

component main () -> () {
  cells {
    x_ = prim std_reg(32);
    f0 = fn0;
    ret = prim std_reg(32);
  }
  wires {
    f0.x = x_.out;
    f0.go = 1'd1;
    ret.write_en = 1'd1;
    ret.in = f0.done ? f0.out;
  }
  control {

  }
}
