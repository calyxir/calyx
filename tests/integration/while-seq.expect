(define/component fsm_expander0
  ((port valid 1) (port clk 1))
  ((port sum 1) (port x0 1))
  ([-> (@ this valid) (@ this sum)] [-> (@ this valid) (@ this x0)])
  (empty))

(define/component fsm_expander1
  ((port valid 1) (port clk 1))
  ((port x0 1))
  ([-> (@ this valid) (@ this x0)])
  (empty))

(define/component main
  ((port valid 1) (port clk 1))
  ((port ready 1))
  ([new fsm_expander0 fsm_expander0]
   [new fsm_expander1 fsm_expander1]
   [new-std add (std_add 32)]
   [new-std end_state0 (std_fsm_state)]
   [new-std fsm_state0 (std_fsm_state)]
   [new-std fsm_state1 (std_fsm_state)]
   [new-std i0 (std_iterator 32 0 10 1)]
   [new-std start_fsm0 (std_start_fsm)]
   [new-std sum (std_reg 32)]
   [new-std x0 (std_reg 32)]
   [-> (@ add out) (@ sum in)]
   [-> (@ end_state0 out) (@ this ready)]
   [-> (@ fsm_expander0 sum) (@ sum write_en)]
   [-> (@ fsm_expander0 x0) (@ x0 write_en)]
   [-> (@ fsm_expander1 x0) (@ x0 write_en)]
   [-> (@ fsm_state0 out) (@ fsm_expander0 valid)]
   [-> (@ fsm_state0 out) (@ fsm_state1 in)]
   [-> (@ fsm_state1 out) (@ end_state0 in)]
   [-> (@ fsm_state1 out) (@ fsm_expander1 valid)]
   [-> (@ i0 out) (@ add left)]
   [-> (@ i0 out) (@ x0 in)]
   [-> (@ start_fsm0 out) (@ fsm_state0 in)]
   [-> (@ x0 out) (@ add right)]
   [-> (@ this clk) (@ end_state0 clk)]
   [-> (@ this clk) (@ fsm_expander0 clk)]
   [-> (@ this clk) (@ fsm_expander1 clk)]
   [-> (@ this clk) (@ fsm_state0 clk)]
   [-> (@ this clk) (@ fsm_state1 clk)]
   [-> (@ this clk) (@ i0 clk)]
   [-> (@ this clk) (@ start_fsm0 clk)]
   [-> (@ this clk) (@ sum clk)]
   [-> (@ this clk) (@ x0 clk)]
   [-> (@ this valid) (@ start_fsm0 valid)])
  (while (@ i0 stop) (i0) (enable fsm_expander0 fsm_state0 fsm_expander1 fsm_state1 sum x0)))
