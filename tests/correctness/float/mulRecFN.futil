import "primitives/core.futil";
import "primitives/memories/comb.futil";
import "primitives/float/fNToRecFN.futil";
import "primitives/float/recFNToFN.futil";
import "primitives/float/mulRecFN.futil";

component main(@go go: 1) -> (@done done: 1) {
    cells {
        @external mem = comb_mem_d1(32, 1, 1);
        fNToRecFN0 = fNToRecFN(8, 24, 32, 33);
        fNToRecFN1 = fNToRecFN(8, 24, 32, 33);
        recFNToFN0 = recFNToFN(8, 24, 33, 32);
        mulRecFN0 = mulRecFN(8, 24, 33);
    }

    wires {
        group mul_recoded {
            fNToRecFN0.in_ = 32'b01000000110000000000000000000000; // = 6
            fNToRecFN1.in_ = 32'b00111111001100110011001100110011; // =0.7

            mulRecFN0.a = fNToRecFN0.out;
            mulRecFN0.b = fNToRecFN1.out;

            mulRecFN0.control = 1'b0;
            mulRecFN0.roundingMode = 3'b0;

            recFNToFN0.in_ = mulRecFN0.out;

            mem.addr0 = 1'b0;
            mem.write_data = recFNToFN0.out;
            mem.write_en = 1'd1;
            mul_recoded[done] = mem.done;
        }
    }

    control {
        mul_recoded;
    }
}