decl A: ubit<32>[8][8];
decl x: ubit<32>[8];
decl y: ubit<32>[8];
decl tmp: ubit<32>[8];

for (let i: ubit<4> = 0..8) {
  y[i] := 0;
}

---

for (let i: ubit<4> = 0..8) {
  tmp[i] := 0;
  ---
  for (let j: ubit<4> = 0..8) {
    let t: ubit<32> = tmp[i];
    ---
    tmp[i] := t + A[i][j] * x[j];
  }
  ---
  for (let j: ubit<4> = 0..8) {
    let y0: ubit<32> = y[j];
    ---
    y[j] := y0 + A[i][j] * tmp[i];
  }
}
